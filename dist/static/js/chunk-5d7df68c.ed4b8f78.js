(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d7df68c"],{"3e96":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("page",[e("div",{staticStyle:{"margin-bottom":"24px"}},[e("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.openAddClass(!0,"添加班级",null)}}},[t._v("添加班级")])],1),e("common-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.list,headers:t.headers,paging:!0,"total-num":t.total,"page-num":t.page,"size-num":t.limit},on:{"update:pageNum":function(a){t.page=a},"update:page-num":function(a){t.page=a},"update:sizeNum":function(a){t.limit=a},"update:size-num":function(a){t.limit=a},callback:t.getClassList},scopedSlots:t._u([{key:"operation",fn:function(a){var s=a.row;return[e("el-button",{attrs:{type:"text"},on:{click:function(a){return t.link("classInfo",s.id)}}},[t._v("详情")]),e("el-button",{attrs:{type:"text"},on:{click:function(a){return t.openAddClass(!0,"编辑班级",s)}}},[t._v("编辑")]),e("el-button",{staticClass:"btn-delete",attrs:{type:"text"}},[t._v("删除")])]}}])}),e("add-class",{attrs:{show:t.showAddClass,title:t.title,"class-info":t.classInfo},on:{"update:show":function(a){t.showAddClass=a},callback:t.classCallback}})],1)},n=[],i=e("fbf3"),o=e("c466"),l=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("common-dialog",{attrs:{visible:t.visible,title:t.title,"submit-loading":t.submitLoading},on:{"update:visible":function(a){t.visible=a},submit:t.postDataForTeacher,open:t.onOpen},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"myfrom"},[e("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"班级名称"}},[e("el-input",{staticStyle:{width:"100%"},attrs:{maxlength:"10",placeholder:"请输入班级姓名"},model:{value:t.form.class_name,callback:function(a){t.$set(t.form,"class_name",a)},expression:"form.class_name"}})],1),e("el-form-item",{attrs:{label:"班级类型"}},[e("el-radio-group",{model:{value:t.form.class_type,callback:function(a){t.$set(t.form,"class_type",a)},expression:"form.class_type"}},t._l(t.classType,(function(a,s){return e("el-radio",{key:a,attrs:{label:s}},[t._v(t._s(a))])})),1)],1),e("el-form-item",{attrs:{label:"班级容量"}},[e("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,max:99,label:"最大99"},model:{value:t.form.capacity,callback:function(a){t.$set(t.form,"capacity",a)},expression:"form.capacity"}}),e("div",{staticClass:"my-tips"},[t._v("班级容量不填或者为0，为不限人数")])],1),e("el-form-item",{attrs:{label:"备注"}},[e("el-input",{staticStyle:{width:"100%"},attrs:{maxlength:"100",placeholder:"请输入班级备注"},model:{value:t.form.remark,callback:function(a){t.$set(t.form,"remark",a)},expression:"form.remark"}})],1)],1)],1)]},proxy:!0}])})},c=[],r=(e("d81d"),e("b64b"),e("5530")),u=e("f121"),d={props:{show:{type:Boolean,default:!1},title:{type:String,defalut:""},classInfo:{type:Object,default:null}},data:function(){return{form:{class_name:"",class_type:"1",remark:"",status:"1",capacity:0},submitLoading:!1,classType:u["d"]}},computed:{visible:{get:function(){return this.show},set:function(t){this.$emit("update:show",t)}}},methods:{onOpen:function(){var t=this;this.classInfo?Object.keys(this.form).map((function(a){t.form[a]=t.classInfo[a]})):this.form={class_name:"",class_type:"1",remark:"",status:"1",capacity:0}},postDataForTeacher:function(){this.classInfo?this.classUpdate():this.classCreate()},classUpdate:function(){var t=this,a={class_id:this.classInfo.id};this.submitLoading=!0;var e=Object(r["a"])({},this.form);Object(i["b"])(a,e).then((function(a){t.submitLoading=!1,t.$message({message:"更新成功",type:"success"}),t.visible=!1,t.$emit("callback")})).catch((function(a){t.submitLoading=!1,t.$message.error(a)}))},classCreate:function(){var t=this;this.submitLoading=!0;var a={school_id:this.school_id,campus_id:this.campus_id},e=Object(r["a"])({},this.form);Object(i["a"])(a,e).then((function(a){t.submitLoading=!1,t.$message({message:"创建成功",type:"success"}),t.visible=!1,t.$emit("callback")})).catch((function(a){t.submitLoading=!1,t.$message.error(a)}))}}},m=d,f=(e("4075"),e("2877")),p=Object(f["a"])(m,l,c,!1,null,"07a1605a",null),b=p.exports,h={components:{addClass:b},data:function(){return{loading:!1,list:[],headers:[{prop:"class_name",label:"班级名称"},{prop:"class_type",label:"班级类型",formatter:function(t,a,e){return u["d"][e]}},{prop:"capacity",label:"班级容量"},{prop:"status",label:"班级状态",formatter:function(t,a,e){return u["c"][e]}},{prop:"created_at",label:"创建时间",formatter:function(t,a,e){return Object(o["a"])(e,"YYYY-MM-DD")}}],total:0,page:1,limit:10,showAddClass:!1,title:"",classInfo:{}}},created:function(){this.getClassList()},methods:{link:function(t,a){this.$router.push({name:t,params:{class_id:a}})},classCallback:function(){this.getClassList()},openAddClass:function(t,a,e){this.showAddClass=t,this.title=a,this.classInfo=e},getClassList:function(){var t=this;this.loading=!0,Object(i["d"])({school_id:this.school_id,campus_id:this.campus_id,page:this.page,limit:this.limit}).then((function(a){t.loading=!1,t.list=a.data.item,t.total=a.data.total})).catch((function(){t.loading=!1}))}}},g=h,_=Object(f["a"])(g,s,n,!1,null,null,null);a["default"]=_.exports},4075:function(t,a,e){"use strict";e("bad2")},bad2:function(t,a,e){},f121:function(t,a,e){"use strict";e.d(a,"d",(function(){return s})),e.d(a,"c",(function(){return n})),e.d(a,"e",(function(){return i})),e.d(a,"f",(function(){return o})),e.d(a,"g",(function(){return l})),e.d(a,"a",(function(){return c})),e.d(a,"b",(function(){return r}));var s={1:"正式班",2:"临时班"},n={1:"未开班",2:"已开班",3:"已毕业"},i={1:"男",2:"女",3:"保密"},o={1:"正常",2:"毕业"},l={1:"正常",2:"停用"},c={1:"正常",2:"停用"},r={1:"在班",2:"离班"}},fbf3:function(t,a,e){"use strict";e.d(a,"d",(function(){return n})),e.d(a,"b",(function(){return i})),e.d(a,"a",(function(){return o})),e.d(a,"e",(function(){return l})),e.d(a,"c",(function(){return c}));var s=e("b775");function n(t,a){return Object(s["a"])({url:"/api/class/list",method:"get",params:t,data:a})}function i(t,a){return Object(s["a"])({url:"/api/class/update",method:"post",params:t,data:a})}function o(t,a){return Object(s["a"])({url:"/api/class/create",method:"post",params:t,data:a})}function l(t,a){return Object(s["a"])({url:"/api/class/member/list",method:"get",params:t,data:a})}function c(t,a){return Object(s["a"])({url:"/api/class/info",method:"get",params:t,data:a})}}}]);