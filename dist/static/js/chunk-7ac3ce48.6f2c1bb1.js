(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ac3ce48"],{"4b3e0":function(t,e,a){"use strict";a("697d")},"697d":function(t,e,a){},b8f7:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page",[a("div",{staticStyle:{"margin-bottom":"30px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.openAddCampus(!0,"添加校区",null)}}},[t._v("添加校区")])],1),a("common-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.list,headers:t.headers,paging:!0,"total-num":t.total,"page-num":t.page,"size-num":t.limit},on:{"update:pageNum":function(e){t.page=e},"update:page-num":function(e){t.page=e},"update:sizeNum":function(e){t.limit=e},"update:size-num":function(e){t.limit=e},callback:t.getCampusList},scopedSlots:t._u([{key:"operation",fn:function(e){var i=e.row;return[a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.openAddCampus(!0,"编辑校区",i)}}},[t._v("编辑")]),a("el-button",{staticClass:"btn-delete",attrs:{type:"text"}},[t._v("删除")])]}}])}),a("add-campus",{attrs:{show:t.showAddCampus,title:t.title,"campus-info":t.campusInfo},on:{"update:show":function(e){t.showAddCampus=e},callback:t.campusCallback}})],1)},s=[],n=a("caa4"),o=a("c466"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("common-dialog",{attrs:{visible:t.visible,title:t.title,"submit-loading":t.submitLoading},on:{"update:visible":function(e){t.visible=e},submit:t.postDataForCampus,open:t.onOpen},scopedSlots:t._u([{key:"content",fn:function(){return[a("div",{staticClass:"myfrom"},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"校区名称"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{maxlength:"20",placeholder:"请输入校区名称"},model:{value:t.form.campus_name,callback:function(e){t.$set(t.form,"campus_name",e)},expression:"form.campus_name"}})],1),a("el-form-item",{attrs:{label:"校区地址"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{clearable:"",props:t.props},on:{change:t.handleChange},model:{value:t.cityArr,callback:function(e){t.cityArr=e},expression:"cityArr"}})],1),a("el-form-item",{attrs:{label:"详细地址"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{maxlength:"50",placeholder:"请输入校区详细地址"},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1)],1)],1)]},proxy:!0}])})},r=[],l=(a("d81d"),a("b0c0"),a("b64b"),{props:{show:{type:Boolean,default:!1},title:{type:String,defalut:""},campusInfo:{type:Object,default:null}},data:function(){return{form:{campus_name:"",address:"",province:"",city:"",area:""},props:{lazy:!0,lazyLoad:function(t,e){console.log(t);var a=t.level,i=t.value;0==a&&(i=1),Object(n["f"])(i).then((function(t){t.data.map((function(t){return t.value=t.code,t.label=t.name,t.leaf=a>=2,t})),e(t.data)}))}},cityArr:[],provinceList:[],cityList:[],areaList:[],submitLoading:!1}},computed:{visible:{get:function(){return this.show},set:function(t){this.$emit("update:show",t)}}},methods:{getCityList:function(t,e){var a=this;Object(n["f"])(t).then((function(t){a[e]=t.data}))},onOpen:function(){var t=this;this.campusInfo?(Object.keys(this.form).map((function(e){t.form[e]=t.campusInfo[e]})),this.cityArr=[this.form.province,this.form.city,this.form.area]):(Object.keys(this.form).map((function(e){t.form[e]=""})),this.cityArr=[])},postDataForCampus:function(){this.campusInfo?this.campusUpdate():this.campusCreate()},campusUpdate:function(){var t=this,e={campus_id:this.campusInfo.id};this.submitLoading=!0,this.form.province=this.cityArr[0],this.form.city=this.cityArr[1],this.form.area=this.cityArr[2],Object(n["b"])(e,this.form).then((function(e){t.submitLoading=!1,t.$message({message:"更新成功",type:"success"}),t.visible=!1,t.$emit("callback")})).catch((function(e){t.submitLoading=!1}))},campusCreate:function(){var t=this,e={school_id:this.school_id};this.submitLoading=!0,this.form.province=this.cityArr[0],this.form.city=this.cityArr[1],this.form.area=this.cityArr[2],Object(n["a"])(e,this.form).then((function(e){t.submitLoading=!1,t.$message({message:"创建成功",type:"success"}),t.visible=!1,t.$emit("callback")})).catch((function(e){t.submitLoading=!1}))}}}),u=l,m=(a("4b3e0"),a("2877")),p=Object(m["a"])(u,c,r,!1,null,"e1ac1622",null),d=p.exports,f={components:{addCampus:d},data:function(){return{loading:!1,list:[],headers:[{prop:"campus_name",label:"校区名称"},{prop:"address",label:"详细地址"},{prop:"created_at",label:"创建时间",formatter:function(t,e,a){return Object(o["a"])(a,"YYYY-MM-DD")}}],total:0,page:1,limit:10,showAddCampus:!1,title:"",campusInfo:{}}},created:function(){this.getCampusList()},methods:{campusCallback:function(){this.getCampusList()},openAddCampus:function(t,e,a){this.showAddCampus=t,this.title=e,this.campusInfo=a},getCampusList:function(){var t=this;this.loading=!0,Object(n["d"])({school_id:this.school_id,page:this.page,limit:this.limit}).then((function(e){t.loading=!1,t.list=e.data.item,t.total=e.data.total,console.log("res:",e)})).catch((function(){t.loading=!1}))}}},h=f,b=Object(m["a"])(h,i,s,!1,null,null,null);e["default"]=b.exports}}]);