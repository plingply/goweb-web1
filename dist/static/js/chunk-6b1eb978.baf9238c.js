(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b1eb978"],{df08:function(e,o,t){"use strict";t("e5c6")},e5c6:function(e,o,t){},f495:function(e,o,t){"use strict";t.r(o);var s=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",{staticClass:"school"},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"title"},[e._v("欢迎光临，创建属于您的学校把！")]),t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"学校名称"}},[t("el-input",{attrs:{maxlength:"20"},model:{value:e.form.school_name,callback:function(o){e.$set(e.form,"school_name",o)},expression:"form.school_name"}})],1),t("el-form-item",{attrs:{label:"校区名称"}},[t("el-input",{attrs:{maxlength:"20"},model:{value:e.form.campus_name,callback:function(o){e.$set(e.form,"campus_name",o)},expression:"form.campus_name"}}),t("div",{staticClass:"tips"},[e._v("创建学校，必须创建一个校区")])],1),t("el-form-item",{attrs:{label:"LOGO"}},[t("div",{staticClass:"avatar-box"},[t("el-image",{staticStyle:{width:"80px",height:"80px"},attrs:{src:e.form.logo,fit:"cover"},nativeOn:{click:function(o){e.imagecropperShow=!0}}})],1),t("image-cropper",{directives:[{name:"show",rawName:"v-show",value:e.imagecropperShow,expression:"imagecropperShow"}],key:e.imagecropperKey,attrs:{width:300,height:300,url:"/api/upload/file",field:"file","lang-type":"en"},on:{close:e.close,"crop-upload-success":e.cropSuccess}})],1),t("el-form-item",{attrs:{label:""}},[t("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.createSchool}},[e._v("创建并进入系统")])],1)],1)],1)],1)},c=[],a=(t("45fc"),t("ac1f"),t("5319"),t("caa4")),r=t("5d2d"),i={data:function(){return{form:{school_name:"",campus_name:"",logo:""},imagecropperShow:!1,imagecropperKey:0}},methods:{cropSuccess:function(e){this.imagecropperShow=!1,this.imagecropperKey=this.imagecropperKey+1,this.form.logo=e},close:function(){this.imagecropperShow=!1},createSchool:function(){var e=this;Object(a["c"])(this.form).then((function(o){e.$message.success(o.message),e.$router.push("/")}))},GetSchoolList:function(){var e=this;this.$store.dispatch("school/getSchoolList").then((function(o){e.$store.commit("school/SET_SCHOOLLIST",o);var t=r["a"].ls_get("school_id"),s=o.some((function(e){if(e.school_id===t)return!0}));console.log("result:",s,t),t&&s||(t=o[0].school_id),e.$store.commit("school/SET_SCHOOLID",t),e.$store.dispatch("school/getCampusSimpleList",{school_id:t}).then((function(o){e.$router.replace("/")})).catch((function(o){e.$store.dispatch("user/resetToken"),e.$message.error(o)}))})).catch((function(o){e.$store.dispatch("user/resetToken"),e.$message.error(o)}))}}},l=i,n=(t("df08"),t("2877")),m=Object(n["a"])(l,s,c,!1,null,"eca7ba4a",null);o["default"]=m.exports}}]);