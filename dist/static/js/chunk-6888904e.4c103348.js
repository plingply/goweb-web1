(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6888904e"],{"0784":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("page",[n("div",{staticStyle:{"margin-bottom":"24px"}},[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.openAddSubject(!0,"添加课程",null)}}},[t._v("添加课程")])],1),n("common-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.list,headers:t.headers,paging:!0,"total-num":t.total,"page-num":t.page,"size-num":t.limit},on:{"update:pageNum":function(e){t.page=e},"update:page-num":function(e){t.page=e},"update:sizeNum":function(e){t.limit=e},"update:size-num":function(e){t.limit=e},callback:t.getSubjectList},scopedSlots:t._u([{key:"operation",fn:function(e){var a=e.row;return[n("el-button",{attrs:{type:"text"},on:{click:function(e){return t.openAddSubject(!0,"编辑课程",a)}}},[t._v("编辑")]),n("el-button",{staticClass:"btn-delete",attrs:{type:"text"}},[t._v("删除")])]}}])}),n("add-subject",{attrs:{show:t.showAddSubject,title:t.title,"subject-info":t.subjectInfo},on:{"update:show":function(e){t.showAddSubject=e},callback:t.subjectCallback}})],1)},i=[],s=n("b775");function o(t,e){return Object(s["a"])({url:"/api/subject/list",method:"get",params:t,data:e})}function u(t,e){return Object(s["a"])({url:"/api/subject/update",method:"post",params:t,data:e})}function c(t,e){return Object(s["a"])({url:"/api/subject/create",method:"post",params:t,data:e})}var r=n("c466"),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("common-dialog",{attrs:{visible:t.visible,title:t.title,"submit-loading":t.submitLoading},on:{"update:visible":function(e){t.visible=e},submit:t.postDataForSubject,open:t.onOpen},scopedSlots:t._u([{key:"content",fn:function(){return[n("div",{staticClass:"myfrom"},[n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"课程名称"}},[n("el-input",{staticStyle:{width:"100%"},attrs:{maxlength:"10",placeholder:"请输入课程姓名"},model:{value:t.form.subject_name,callback:function(e){t.$set(t.form,"subject_name",e)},expression:"form.subject_name"}})],1),n("el-form-item",{attrs:{label:"备注"}},[n("el-input",{staticStyle:{width:"100%"},attrs:{maxlength:"100",placeholder:"请输入课程备注"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1)],1)]},proxy:!0}])})},d=[],m=(n("d81d"),n("b64b"),n("5530")),f={props:{show:{type:Boolean,default:!1},title:{type:String,defalut:""},subjectInfo:{type:Object,default:null}},data:function(){return{form:{subject_name:"",remark:"",status:"1"},submitLoading:!1}},computed:{visible:{get:function(){return this.show},set:function(t){this.$emit("update:show",t)}}},methods:{onOpen:function(){var t=this;this.subjectInfo?Object.keys(this.form).map((function(e){t.form[e]=t.subjectInfo[e]})):this.form={subject_name:"",remark:"",status:"1"}},postDataForSubject:function(){this.subjectInfo?this.subjectUpdate():this.subjectCreate()},subjectUpdate:function(){var t=this,e={subject_id:this.subjectInfo.id};this.submitLoading=!0;var n=Object(m["a"])({},this.form);u(e,n).then((function(e){t.submitLoading=!1,t.$message({message:"更新成功",type:"success"}),t.visible=!1,t.$emit("callback")})).catch((function(e){t.submitLoading=!1,t.$message.error(e)}))},subjectCreate:function(){var t=this;this.submitLoading=!0;var e={school_id:this.school_id,campus_id:this.campus_id},n=Object(m["a"])({},this.form);c(e,n).then((function(e){t.submitLoading=!1,t.$message({message:"创建成功",type:"success"}),t.visible=!1,t.$emit("callback")})).catch((function(e){t.submitLoading=!1,t.$message.error(e)}))}}},b=f,p=(n("0fe6"),n("2877")),h=Object(p["a"])(b,l,d,!1,null,"fa2aa74e",null),j=h.exports,g=n("f121"),v={components:{addSubject:j},data:function(){return{loading:!1,list:[],headers:[{prop:"subject_name",label:"班级名称"},{prop:"status",label:"课程状态",formatter:function(t,e,n){return g["g"][n]}},{prop:"remark",label:"备注"},{prop:"created_at",label:"创建时间",formatter:function(t,e,n){return Object(r["a"])(n,"YYYY-MM-DD")}}],total:0,page:1,limit:10,showAddSubject:!1,title:"",subjectInfo:{}}},created:function(){this.getSubjectList()},methods:{subjectCallback:function(){this.getSubjectList()},openAddSubject:function(t,e,n){this.showAddSubject=t,this.title=e,this.subjectInfo=n},getSubjectList:function(){var t=this;this.loading=!0,o({school_id:this.school_id,campus_id:this.campus_id,page:this.page,limit:this.limit}).then((function(e){t.loading=!1,t.list=e.data.item,t.total=e.data.total})).catch((function(){t.loading=!1}))}}},_=v,k=Object(p["a"])(_,a,i,!1,null,null,null);e["default"]=k.exports},"0fe6":function(t,e,n){"use strict";n("59f3")},"59f3":function(t,e,n){},f121:function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"e",(function(){return s})),n.d(e,"f",(function(){return o})),n.d(e,"g",(function(){return u})),n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return r}));var a={1:"正式班",2:"临时班"},i={1:"未开班",2:"已开班",3:"已毕业"},s={1:"男",2:"女",3:"保密"},o={1:"正常",2:"毕业"},u={1:"正常",2:"停用"},c={1:"正常",2:"停用"},r={1:"在班",2:"离班"}}}]);